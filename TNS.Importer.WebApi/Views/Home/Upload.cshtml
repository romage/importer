@model TNS.Importer.Models.Product
@{
    ViewBag.Title = "Upload";
}

<style>
    .btn-file {
        position: relative;
        overflow: hidden;
    }

        .btn-file input[type=file] {
            position: absolute;
            top: 0;
            right: 0;
            min-width: 100%;
            min-height: 100%;
            font-size: 100px;
            text-align: right;
            filter: alpha(opacity=0);
            opacity: 0;
            outline: none;
            background: white;
            cursor: inherit;
            display: block;
        }
</style>

<h2>Upload</h2>

@using (Html.BeginForm("upload", "home", FormMethod.Post, new { enctype = "multipart/form-data" }))
{

    @Html.AntiForgeryToken()

    <div class="form-group">
        @Html.LabelFor(l => l.ProductName)
        @Html.EditorFor(e => e.ProductName, new { htmlAttributes = new { @Class = "form-control", placeholder = "Product name" } })
        @Html.ValidationMessageFor(e => e.ProductName)
    </div>

    <div class="form-group">
        @Html.LabelFor(l => l.Scorer)
        @Html.EditorFor(e => e.Scorer, new { htmlAttributes = new { @class = "form-control", @placeholder = "Scorer" } })
    </div>

    <div class="form-group">
        @Html.LabelFor(l => l.ScorerEmail)
        @Html.EditorFor(e => e.ScorerEmail, new { htmlAttributes = new { @class = "form-control", placeholder = "Scorer's Email" } })
    </div>

    <div class="form-group">
        <label for="file"></label>
        <span class="input-group-btn">
            <span class="btn btn-default btn-file">
                Browse...
                <input type="file" name="file" id="file" class="btn btn-file" required />
            </span>
            <input type="text" class="form-control btn" id="fileName" readonly />
        </span>

    </div>


    <div class="form-group">
        <input type="submit" class="btn btn-primary" />
    </div>

}


@section Scripts{
    <script type="text/javascript">
        $(document).ready(function () {
            $('.btn-file :file').on('fileselect', function (event, numFiles, label) {
                console.log(numFiles);
                console.log(label);
                $("#fileName").val(label);
            });
        });

        $(document).on('change', '.btn-file :file', function () {
            var input = $(this),
                numFiles = input.get(0).files ? input.get(0).files.length : 1,
                label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
                input.trigger('fileselect', [numFiles, label]);
        });
    </script>
}




